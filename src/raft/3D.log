2024/05/01 14:49:29 Node[0][]: toFollower currentTerm=[0]
2024/05/01 14:49:29 Node[1][]: toFollower currentTerm=[0]
2024/05/01 14:49:29 Node[2][]: toFollower currentTerm=[0]
Test (3D): snapshots basic ...
2024/05/01 14:49:30 Node[1][CANDIDATE]: Start election for term[1]
2024/05/01 14:49:30 Node[2][FOLLOWER]: Update term[1]
2024/05/01 14:49:30 Node[2][FOLLOWER]: RequestVote SUCCESS candidate=[1] Term=[1]
2024/05/01 14:49:30 Node[0][FOLLOWER]: Update term[1]
2024/05/01 14:49:30 Node[0][FOLLOWER]: RequestVote SUCCESS candidate=[1] Term=[1]
2024/05/01 14:49:30 Node[1][CANDIDATE]: Received RequestVoteReply for term[1] VoteGranted=[true]
2024/05/01 14:49:30 Node[1][CANDIDATE]: Received RequestVoteReply for term[1] VoteGranted=[true]
2024/05/01 14:49:30 Node[1][CANDIDATE]: Won election for term [1]
2024/05/01 14:49:30 Node[1][CANDIDATE]: toLeader currentTerm=[1]
2024/05/01 14:49:30 Node[0][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[-1] lastTerm=[0] commitIndex=[-1]
2024/05/01 14:49:30 Node[2][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[-1] lastTerm=[0] commitIndex=[-1]
2024/05/01 14:49:30 Node[1][LEADER]: Start term=[1] index=[0]
2024/05/01 14:49:30 Node[2][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[0] lastTerm=[1] commitIndex=[-1]
2024/05/01 14:49:30 Node[0][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[0] lastTerm=[1] commitIndex=[-1]
2024/05/01 14:49:30 Node[1][LEADER]: doCommit logIndex=[0]
2024/05/01 14:49:30 Node[2][FOLLOWER]: doCommit logIndex=[0]
2024/05/01 14:49:30 Node[2][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[0] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:30 Node[0][FOLLOWER]: doCommit logIndex=[0]
2024/05/01 14:49:30 Node[0][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[0] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:30 Node[2][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[0] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:30 Node[0][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[0] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:30 Node[2][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[0] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:30 Node[0][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[0] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:30 Node[2][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[0] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:30 Node[0][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[0] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:30 Node[2][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[0] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:30 Node[0][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[0] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:31 Node[1][LEADER]: Start term=[1] index=[1]
2024/05/01 14:49:31 Node[1][LEADER]: Start term=[1] index=[2]
2024/05/01 14:49:31 Node[1][LEADER]: Start term=[1] index=[3]
2024/05/01 14:49:31 Node[1][LEADER]: Start term=[1] index=[4]
2024/05/01 14:49:31 Node[1][LEADER]: Start term=[1] index=[5]
2024/05/01 14:49:31 Node[1][LEADER]: Start term=[1] index=[6]
2024/05/01 14:49:31 Node[1][LEADER]: Start term=[1] index=[7]
2024/05/01 14:49:31 Node[1][LEADER]: Start term=[1] index=[8]
2024/05/01 14:49:31 Node[1][LEADER]: Start term=[1] index=[9]
2024/05/01 14:49:31 Node[0][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[3] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:31 Node[0][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[6] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:31 Node[2][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[9] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:31 Node[2][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[9] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:31 Node[0][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[8] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:31 Node[2][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[9] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:31 Node[0][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[8] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:31 Node[2][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[9] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:31 Node[2][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[9] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:31 Node[0][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[8] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:31 Node[0][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[8] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:31 Node[2][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[9] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:31 Node[0][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[9] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:31 Node[0][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[9] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:31 Node[2][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[9] lastTerm=[1] commitIndex=[0]
2024/05/01 14:49:31 Node[1][LEADER]: doCommit logIndex=[1]
2024/05/01 14:49:31 Node[1][LEADER]: doCommit logIndex=[2]
2024/05/01 14:49:31 Node[1][LEADER]: doCommit logIndex=[3]
2024/05/01 14:49:31 Node[1][LEADER]: doCommit logIndex=[4]
2024/05/01 14:49:31 Node[1][LEADER]: doCommit logIndex=[5]
2024/05/01 14:49:31 Node[0][FOLLOWER]: doCommit logIndex=[5]
2024/05/01 14:49:31 Node[0][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[9] lastTerm=[1] commitIndex=[5]
2024/05/01 14:49:31 Node[2][FOLLOWER]: doCommit logIndex=[5]
2024/05/01 14:49:31 Node[2][FOLLOWER]: AppendEntries SUCCESS LeaderId=[1] Term=[1] lastIndex=[9] lastTerm=[1] commitIndex=[5]
2024/05/01 14:49:31 Node[1][LEADER]: doCommit logIndex=[6]
2024/05/01 14:49:31 Node[1][LEADER]: doCommit logIndex=[7]
2024/05/01 14:49:31 Node[1][LEADER]: doCommit logIndex=[8]
2024/05/01 14:49:31 Node[1][LEADER]: doCommit logIndex=[9]
panic: runtime error: index out of range [-1]

goroutine 26 [running]:
6.5840/raft.(*Raft).broadcastAppendEntries(0xc00018a100, 0x0)
	/home/noel/6.5840/src/raft/raft.go:644 +0x2e5
6.5840/raft.(*Raft).commitMatchedEntries(0xc00018a100)
	/home/noel/6.5840/src/raft/raft.go:687 +0x85
6.5840/raft.(*Raft).tickCommit(0xc00018a100)
	/home/noel/6.5840/src/raft/raft.go:619 +0x59
created by 6.5840/raft.Make in goroutine 18
	/home/noel/6.5840/src/raft/raft.go:761 +0x345
exit status 2
FAIL	6.5840/raft	1.805s
